<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <meta name="description"
          content="There are some great Django pagination examples out there but none of them quite worked for me, so here's another one. If you are first starting out, pagination is &quot;the process of dividing a document ...">
    <meta name="author" content="Marc LaBelle">
    <title>Django Pagination with Bootstrap - Existence Undefined Blog</title>


    <!-- Bootstrap core CSS -->

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

    <!-- Custom Fonts -->

    <link href="https://fonts.googleapis.com/css?family=Monoton|Anton|Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
          rel="stylesheet">


    <link href="/static/vendor/icomoon/style.css" rel="stylesheet" type="text/css">


    <!--DEBUG-->
    <!-- Bootstrap core CSS -->


    <!-- Custom Fonts -->

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/solid.css"
          integrity="sha384-wnAC7ln+XN0UKdcPvJvtqIH3jOjs9pnKnq9qX68ImXvOGz2JuFoEiCjT8jyZQX2z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/brands.css"
          integrity="sha384-nT8r1Kzllf71iZl81CdFzObMsaLOhqBU1JD2+XoAALbdtWaXDOlWOZTR4v1ktjPE" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css"
          integrity="sha384-HbmWTHay9psM8qyzEKPc8odH4DsOuzdejtnr+OFtDmOcIVnhgReQ4GZBH7uwcjf6" crossorigin="anonymous">
    <link href="/static/vendor/icomoon/style.css" rel="stylesheet" type="text/css">


    <!-- Plugin CSS -->


    <!-- Theme CSS -->

    <link href="/static/css/creative.css?v=1.0.4" rel="stylesheet">
    <link href="/static/css/theme.css?v=1.0.6" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="/static/img/favicon_io/site.webmanifest">
</head>

<body id="page-top">

<div id="mobile-indicator"></div>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container-fluid">
        <a class="navbar-brand js-scroll-trigger" href="">

            <i class="icon-logo-sm fa-sm"></i>
        </a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item mobile-mt-2">
                    <a class="nav-link js-scroll-trigger" href="/blog">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="/music">Music</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="/web-design">Web</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="/audio-engineering">Audio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link js-scroll-trigger" href="/resume">Resume</a>
                </li>
                <li class="nav-item mobile-mb-2">
                    <a class="nav-link js-scroll-trigger" href="/#contact">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<input type="hidden" name="csrfmiddlewaretoken"
       value="ow860vImVdncfhQNZHoRnY3PBLosiJ5GLVtUGIlxEFArNNLIIPBpAPfFsiI50iZ8">


<input type="hidden" name="csrfmiddlewaretoken"
       value="ow860vImVdncfhQNZHoRnY3PBLosiJ5GLVtUGIlxEFArNNLIIPBpAPfFsiI50iZ8">

<link href="/static/css/image-viewer.css?v=1.0.5" rel="stylesheet">

<style>

        .masthead-image {
            background: linear-gradient(rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0.75)),
            url(/media/backgrounds/2020/07/28/django_pagination-lightish.jpg);
        }


        @media (max-width: 1400px) {
            body {
                background-color: #fff !important;
            }

            .card {
                padding: 0 !important;
                margin: 0 !important;
            }

            #blog, #disqus_thread, .tag-margin {
                padding: 0;
                margin-left: 1rem!important;
                margin-right: 1rem!important;
                margin-bottom: 0;
            }

            #tags, .tag-margin {
                margin-bottom: 0 !important;
            }

            .social-hr {
                margin-left: 1rem !important;
                margin-right: 1rem !important;
            }
        }

        body {
            background-color: #f9f9f9;
        }

        #blog ul li {
            list-style-type: disc;
            display: list-item;
        }

        .btn-secondary {
            color: #fff !important;
            background-color: var(--color-primary-2, black);
            border-color: var(--color-primary-2, black);
        }

        #blog, #disqus_thread, .tag-margin {
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        .tag-margin ul {
            -webkit-padding-start: 0;
        }

        #tags li {
            display: inline;
        }

        pre {
            line-height: 1.2em;
            background-color: #e6e6e6;
            background-size: 2.4em 2.4em;
            background-origin: content-box;

            /* some extra styles*/
            padding: 10px 20px;
            text-align: justify;
            font-family: calibri, arial, sans-serif;
        }

        img {
            display: block;
            max-width: 80%;
            max-height: 60vh;
            height: auto;
            width: auto;
            box-shadow: 0.1rem 0.1rem .3rem 0.1rem rgba(0, 0, 0, 0.15) !important;
            margin-bottom: 2rem;
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 992px) {
            header.masthead {
                height: 100% !important;
            }
        }

        #content {
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .card {
            padding: 30px;
            box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.05);
            margin-bottom: 4rem;
            border: none;
            border-radius: 0;
        }

        blockquote {
            color: #777;
            margin-left: 2px;
            padding-left: 10px;
            border-left: 5px solid #ddd;
        }

        hr {
            max-width: unset;
            border-width: 1px;
            border-color: lightgray;
            margin: 0;
        }

        .link-no-underline {
            text-decoration: none !important;
        }

        .social-hr {
            margin-left: 0;
            margin-right: 0;
        }

        .social-margin {
            margin-bottom: 0 !important;
        }

        .sim-img {
            margin-bottom: 1rem;
        }
    
</style>

<header class="masthead masthead-image text-center text-white d-flex" id="mastheadPic">
    <div class="container my-auto">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h1 style="font-family: 'Fira Code', Impact, sans-serif">
                    Django Pagination with Bootstrap
                </h1>
            </div>
        </div>
    </div>
</header>

<div id="content">

    <div class="row no-gutters tag-margin social-margin">
        <div class="col-6">
            <p class="text-muted mt-1">May 04, 2020</p>
        </div>
        <div class="col-6 social text-right">
            <a class="link-no-underline" href="" id="facebookShareLink">
                <span class="fa-stack fa-1x">
                    <i class="fas fa-circle fa-stack-2x" style="color: #3b5998"></i>
                    <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
                </span>
            </a>

            <a class="link-no-underline"
               href="https://twitter.com/share?url=http://localhost:8001/blog/11/&amp;text=Django Pagination with Bootstrap">
                <span class="fa-stack fa-1x">
                    <i class="fas fa-circle fa-stack-2x" style="color: #1da1f2"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
            </a>

            <a class="link-no-underline"
               href="http://www.reddit.com/submit?url=http://localhost:8001/blog/11/&amp;title=Django Pagination with Bootstrap">
                <span class="fa-stack fa-1x">
                    <i class="fas fa-circle fa-stack-2x" style="color: #ff4500"></i>
                    <i class="fab fa-reddit fa-stack-1x fa-inverse"></i>
                </span>
            </a>

        </div>

    </div>

    <hr class="social-hr">

    <div class="tag-margin">
        <ul id="tags">

            <li>
                <a href="/blog/?q=HTML"><span class="badge badge-secondary">HTML</span></a>
            </li>

            <li>
                <a href="/blog/?q=Django"><span class="badge badge-secondary">Django</span></a>
            </li>

            <li>
                <a href="/blog/?q=Python"><span class="badge badge-secondary">Python</span></a>
            </li>

        </ul>
    </div>

    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- The Close Button -->
        <span class="img-close">×</span>

        <!-- Modal Content (The Image) -->
        <img class="modal-content" id="modal-image">

        <!-- Modal Caption (Image Text) -->
        <div id="caption"></div>
    </div>

    <div class="card mb-5">
        <div>
            <div id="blog">
                <p class="card-text" id="post"></p>
                <p>There are some great Django pagination examples out there but none of them quite worked for me, so
                    here's another one. If you are first starting out, pagination is "the process of dividing a document
                    into discrete pages, either electronic pages or printed pages." The From the <a
                            href="https://docs.djangoproject.com/en/3.0/topics/pagination">official Django
                        documentation</a>, to <a
                            href="https://simpleisbetterthancomplex.com/tutorial/2016/08/03/how-to-paginate-with-django.html">Simple
                        Is Better Than Complex</a>, I was able to get the basics, but none worked perfectly. <a
                            href="https://medium.com/@sumitlni/paginate-properly-please-93e7ca776432">This Medium blog
                        post by sumitlni</a> has a great solution but I had some issues with it.</p>
                <p>This is how I render my blog list page:</p>
                <pre><code>def blog_posts(request, subject=None):
    """Display all blog posts"""

    if subject:
        qs = BlogPost.objects.filter(subject__subject=subject, published=True)
    else:
        qs = BlogPost.objects.filter(published=True)

    subjects = Subject.objects.all()

    keywords = request.GET.get('q', None)

    if keywords:
        query = SearchQuery(keywords)
        title_vector = SearchVector('title', weight='A')
        tag_vector = SearchVector(StringAgg('tag__tag', delimiter=' '), weight='B')
        content_vector = SearchVector('body', weight='C')
        vectors = title_vector + tag_vector + content_vector
        qs = qs.annotate(search=vectors).filter(search=query).distinct()
        posts = qs.annotate(rank=SearchRank(vectors, query)).distinct().order_by('-rank')

    else:
        posts = qs.order_by('-created_date')

    paginator = Paginator(posts, 20)
    page_number = request.GET.get('page', 1)
    page_obj = paginator.get_page(page_number)

    return render(request, 'blog.html', {'page_obj': page_obj, 'keywords': keywords, 'subjects': subjects, })
</code></pre>
                <p>Here, I set the paginator to 20 posts and get the requested page:</p>
                <pre><code>...
paginator = Paginator(posts, 20)
page_number = request.GET.get('page', 1)
page_obj = paginator.get_page(page_number)

return render(request, 'blog.html', {'page_obj': page_obj, 'keywords': keywords, 'subjects': subjects, })
</code></pre>
                <p>Next, the required Bootstrap HTML. I am only showing the pagination if there is more than 1 page with
                    <code>{% if page_obj.paginator.num_pages &gt; 1 %}</code> and then I am loading the custom
                    pagination tags <code>url_replace</code> and <code>proper_paginate</code> that I will describe below
                    with <code>{% load pagination %}</code>. The rest is semi-custom styling, so please ask any
                    questions if something doesn't make sense. Here is the completed Bootstrap pagination:</p>
                <pre><code>{% if page_obj.paginator.num_pages &gt; 1 %}
    {% load pagination %}
    &lt;ul class="mt-3 pagination justify-content-center"&gt;
        {% if page_obj.number != 1 %}
            &lt;li&gt;&lt;a class="page-link" href="?{% url_replace request 'page' 1 %}"&gt;⇤&lt;/a&gt;&lt;/li&gt;
        {% endif %}
        {% if page_obj.has_previous %}
            &lt;li&gt;&lt;a class="page-link"
                   href="?{% url_replace request 'page' page_obj.previous_page_number %}"&gt;&amp;laquo;&lt;/a&gt;
            &lt;/li&gt;
        {% endif %}
        {% for i in page_obj.paginator|proper_paginate:page_obj.number %}
            {% if page_obj.number == i %}
                &lt;li class="page-item active"&gt;&lt;a class="page-link"
                                                href="?{% url_replace request 'page' i %}"&gt;{{ i }}&lt;/a&gt;
                &lt;/li&gt;
            {% else %}
                &lt;li class="page-item"&gt;&lt;a class="page-link"
                                         href="?{% url_replace request 'page' i %}"&gt;{{ i }}&lt;/a&gt;&lt;/li&gt;
            {% endif %}
        {% endfor %}
        {% if page_obj.has_next %}
            &lt;li&gt;&lt;a class="page-link" href="?{% url_replace request 'page' page_obj.next_page_number %}"&gt;&amp;raquo;&lt;/a&gt;
            &lt;/li&gt;
        {% endif %}
        {% if page_obj.number != page_obj.paginator.num_pages %}
            &lt;li&gt;&lt;a class="page-link"
                   href="?{% url_replace request 'page' page_obj.paginator.num_pages %}"&gt;⇥&lt;/a&gt;&lt;/li&gt;
        {% endif %}
    &lt;/ul&gt;
{% endif %}
</code></pre>
                <p>Finally, the custom pagination tags as described by <a
                        href="https://medium.com/@sumitlni/paginate-properly-please-93e7ca776432">sumitlni</a>
                    "calculates the start and end indices" and "generates the proper URL based on which page number we
                    wish to go to":</p>
                <pre><code>from django import template

register = template.Library()


@register.filter(name='proper_paginate')
def proper_paginate(paginator, current_page, neighbors=2):
    if paginator.num_pages &gt; 2 * neighbors:
        start_index = max(1, current_page - neighbors)
        end_index = min(paginator.num_pages, current_page + neighbors)
        if end_index &lt; start_index + 2 * neighbors:
            end_index = start_index + 2 * neighbors
        elif start_index &gt; end_index - 2 * neighbors:
            start_index = end_index - 2 * neighbors
        if start_index &lt; 1:
            end_index -= start_index
            start_index = 1
        elif end_index &gt; paginator.num_pages:
            start_index -= (end_index - paginator.num_pages)
            end_index = paginator.num_pages
        page_list = [f for f in range(start_index, end_index + 1)]
        return page_list[:(2 * neighbors + 1)]
    return paginator.page_range


@register.simple_tag
def url_replace(request, field, value):
    query_string = request.GET.copy()
    query_string[field] = value

    return query_string.urlencode()
</code></pre>
                <p>The issues I had with the code and blog post above were:</p>
                <p>1) I put them both in a single file called <code>pagination.py</code></p>
                <p>2) I didn't put it in a sub-directory named <code>templatetags</code></p>
                <blockquote>
                    <p>Note, thanks to <a
                            href="https://stackoverflow.com/questions/40686201/django-1-10-1-my-templatetag-is-not-a-registered-tag-library-must-be-one-of">this
                        question at Stack Overflow</a></p>
                </blockquote>
                <p>After changing <code>{% load filter_method_name %}</code> to <code>{% load filename %}</code> and
                    moving <code>pagination.py</code> to a folder named <code>templatetags</code> at the same level as
                    my apps models.py, it worked!</p>
                <p></p>
            </div>

            <hr class="social-hr mt-5">

            <div class="tag-margin mt-5">
                <div class="row" style="display: flex; align-items: center;">
                    <div class="col">

                        <a class="link-no-underline" href="/blog/9">
                            <div style="display: flex; align-items: center;">
                                <span class="fa fa-chevron-left fa-3x"></span>
                                <span class="ml-1"
                                      style="max-width: 300px"> Django Docker Deployment with GitLab CI </span>
                            </div>
                        </a>

                    </div>
                    <div class="col">
                        <div style="float: right">

                            <a class="link-no-underline" href="/blog/12">
                                <div style="display: flex; align-items: center;">
                                    <span class="mr-1" style="text-align: right; max-width: 300px;"> Cache Django View with Redis </span>
                                    <span class="fa fa-chevron-right fa-3x"></span>
                                </div>
                            </a>

                        </div>
                    </div>
                </div>
            </div>

            <div class="container text-center mt-5 mb-5" style="margin-bottom: 5rem;" id="load_comments">
                <a class="btn btn-secondary btn-xl sr-button" onclick="loadDisqus(); return false;">
                    Load Comments
                </a>
            </div>

            <div id="disqus_thread"></div>


            <div class="tag-margin">
                <a href="/blog"> &lt; Back to Blog</a>
            </div>

            <div style="margin-bottom: 5rem;"></div>

        </div>
    </div>
</div>

<script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
<script type="text/javascript" async=""
        src="https://www.googletagmanager.com/gtag/js?id=G-5L3DJCHTNL&amp;l=dataLayer&amp;cx=c"></script>
<script>

        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
        var disqus_config = function () {
            this.page.url = 'http://localhost:8001/blog/programming/11/django-pagination-with-bootstrap';
            this.page.identifier = 'Django Pagination with Bootstrap - 11';
            this.page.title = 'Django Pagination with Bootstrap';
        };

        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://existenceundefined.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            document.getElementById('load_comments').style.visibility = "hidden";
            setTimeout(function () {
                document.getElementById('load_comments').remove()
            }, 1000);
            setTimeout(function () {
                var elmnt = document.getElementById("disqus_thread");
                $([document.documentElement, document.body]).animate({
                    scrollTop: $("#disqus_thread").offset().top
                }, 1000);
            }, 2000);
        }
    
</script>
<noscript>Please enable JavaScript to view the &lt;a href="https://disqus.com/?ref_noscript"&gt;comments powered by
    Disqus.&lt;/a&gt;
</noscript>


<!-- Bootstrap core JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>

<!-- Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>

<!-- Theme JavaScript -->
<script src="/static/js/creative.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>

<!--DEBUG-->


<script src="/static/vendor/scrollreveal/scrollreveal.min.js"></script>


<!-- Theme JavaScript -->


<script>
    $(function () {
        $(document).click(function (event) {
            $('.navbar-collapse').collapse('hide');
        });
    });

</script>


<script>
        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var img = document.getElementById("myImg");
        var modalImg = document.getElementById("modal-image");
        var captionText = document.getElementById("caption");

        function imageModal() {
            modal.style.display = "block";
            modalImg.src = this.src;
            captionText.innerHTML = this.alt;
        }

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("img-close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        };

        // When the user clicks on <span> (x), close the modal
        modal.onclick = function () {
            modal.style.display = "none";
        };
    
</script>

<script>
        var images = document.getElementsByTagName('img');
        var ul = document.getElementsByTagName('ul');
        for (var i = 0; i < images.length; i++) {
            if (images[i].src.includes("/media/markdownx")) {
                images[i].classList.add("image-item");
                images[i].addEventListener("click", imageModal);
            }
        }
    
</script>


<script>
        $("#facebookShareLink").on("click", function () {
            var fbpopup = window.open("https://www.facebook.com/sharer/sharer.php?u=http://localhost:8001/blog/11/&text=Django Pagination with Bootstrap&t=Django Pagination with Bootstrap", "pop", "width=600, height=400, scrollbars=no");
            console.log('fb');
            return false;
        });
    
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125665238-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-125665238-1');


</script>


</body>
</html>
